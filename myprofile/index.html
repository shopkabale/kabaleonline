<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Profile | Kabale Online</title>
<meta name="robots" content="noindex">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
    /* --- THEME-AWARE CSS VARIABLES --- */
    :root {
        --ko-primary: #007aff;
        --ko-primary-rgb: 0, 122, 255;
        --ko-accent: #ffc107;
        
        --bg-light: #f8f9fa;
        --bg-card-light: #ffffff;
        --text-main-light: #212529;
        --text-secondary-light: #6c757d;
        --border-color-light: #e9ecef;
        
        --bg-dark: #0f172a;
        --bg-card-dark: #1e2b3b;
        --text-main-dark: #e2e8f0;
        --text-secondary-dark: #94a3b8;
        --border-color-dark: #334155;
        
        --shadow: 0 10px 30px rgba(0,0,0,0.07);
        --border-radius: 12px;
    }

    /* --- THEME-SWITCHING LOGIC --- */
    body.light-mode {
        --bg-main: var(--bg-light);
        --bg-card: var(--bg-card-light);
        --text-main: var(--text-main-light);
        --text-secondary: var(--text-secondary-light);
        --border-color: var(--border-color-light);
    }

    body.dark-mode {
        --bg-main: var(--bg-dark);
        --bg-card: var(--bg-card-dark);
        --text-main: var(--text-main-dark);
        --text-secondary: var(--text-secondary-dark);
        --border-color: var(--border-color-dark);
    }
    
    /* --- GENERAL & HEADER STYLES --- */
    body { 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
        margin: 0; 
        background-color: var(--bg-main); 
        color: var(--text-main); 
        line-height: 1.6; 
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
    .page-content { padding-top: 90px; padding-bottom: 30px; }
    hr { border: none; height: 1px; background-color: var(--border-color); }

    .sticky-header {
        position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
        background-color: rgba(var(--bg-card-rgb, 30, 41, 59), 0.8);
        backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border-color);
        transition: background-color 0.3s, border-color 0.3s;
    }
    body.light-mode .sticky-header { --bg-card-rgb: 255, 255, 255; }
    body.dark-mode .sticky-header { --bg-card-rgb: 30, 41, 59; }

    .header-content { display: flex; align-items: center; justify-content: space-between; height: 70px; max-width: 1200px; margin: 0 auto; padding: 0 15px; }
    .site-title { text-decoration: none; color: var(--text-main); font-size: 1.5em; font-weight: 700; }
    .site-title span { color: var(--ko-accent); }
    .hamburger-menu { font-size: 24px; background: none; border: none; cursor: pointer; color: var(--text-main); display: block; }
    .header-icons { display: flex; align-items: center; gap: 20px; }
    .header-icons a { color: var(--text-secondary); font-size: 22px; text-decoration: none; transition: color 0.2s; }
    .header-icons a:hover { color: var(--ko-primary); }

    .desktop-nav { display: none; } 
    @media (min-width: 1024px) {
        .hamburger-menu { display: none; }
        .desktop-nav { display: flex; align-items: center; gap: 25px; margin: 0; padding: 0; list-style: none; }
        .desktop-nav a { text-decoration: none; color: var(--text-secondary); font-weight: 500; font-size: 1em; padding: 8px 0; border-bottom: 2px solid transparent; transition: all 0.2s ease; }
        .desktop-nav a:hover, .desktop-nav a.active { color: var(--text-main); border-bottom-color: var(--ko-primary); }
    }

    /* --- MOBILE NAV STYLES --- */
    .mobile-nav-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1090; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s 0.3s; }
    .mobile-nav-overlay.active { opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
    .mobile-nav { position: fixed; top: 0; left: -280px; width: 280px; height: 100%; background-color: var(--bg-card); box-shadow: 2px 0 10px rgba(0,0,0,0.1); z-index: 1100; transition: transform 0.3s ease; display: flex; flex-direction: column; transform: translateX(0); }
    .mobile-nav.active { transform: translateX(280px); }
    .mobile-nav-header { padding: 15px 20px; border-bottom: 1px solid var(--border-color); font-size: 1.2em; font-weight: bold; }
    .mobile-nav a { display: flex; align-items: center; padding: 15px 20px; color: var(--text-main); text-decoration: none; border-bottom: 1px solid var(--border-color); }
    .mobile-nav a i { margin-right: 15px; font-size: 18px; color: var(--ko-primary); }

    /* --- MESSAGE & LOADER STYLES --- */
    .error-message, .success-message { display: none; border-radius: 5px; padding: 10px; text-align: center; margin: 10px 0; font-weight: bold; font-size: 0.9em; border: 1px solid; }
    body.light-mode .error-message { color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; }
    body.dark-mode .error-message { color: #f5c6cb; background-color: #4a1c24; border-color: #dc3545; }
    body.light-mode .success-message { color: #155724; background-color: #d4edda; border-color: #c3e6cb; }
    body.dark-mode .success-message { color: #c3e6cb; background-color: #1f3c2b; border-color: #28a745; }
    .loader { width: 18px; height: 18px; border: 2px solid #FFF; border-bottom-color: transparent; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite; margin-right: 8px; }
    @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .cta-button.loading { display: flex; align-items: center; justify-content: center; opacity: 0.8; cursor: not-allowed; }

    /* --- PROFILE PAGE STYLES (THEMED) --- */
    .home-link { color: var(--ko-primary); text-decoration: none; font-weight: 600; margin-bottom: 15px; display: inline-block; }
    .profile-card { max-width: 700px; margin: 0 auto; background-color: var(--bg-card); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 30px; margin-top: 20px; border: 1px solid var(--border-color); }
    .profile-header { text-align: center; margin-bottom: 25px; }
    .profile-header img { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid var(--ko-primary); }
    .profile-info-item { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid var(--border-color); }
    .profile-info-item:last-child { border-bottom: none; }
    .profile-info-item .label { font-weight: bold; color: var(--text-main); }
    .profile-info-item .value { color: var(--text-secondary); text-align: right; word-break: break-all; }
    .profile-actions { text-align: center; margin-top: 30px; }
    .form-actions { display: flex; gap: 10px; justify-content: center; margin-top: 20px; }
    .hidden { display: none !important; }
    .glowing-btn { animation: glowing 2s infinite; }
    @keyframes glowing { 0% { box-shadow: 0 0 5px var(--ko-primary), 0 0 10px var(--ko-primary); } 50% { box-shadow: 0 0 20px var(--ko-primary), 0 0 30px var(--ko-primary); } 100% { box-shadow: 0 0 5px var(--ko-primary), 0 0 10px var(--ko-primary); } }

    /* Profile Form Styling */
    #profile-form .form-group { margin-bottom: 20px; }
    #profile-form label { display: block; margin-bottom: 8px; font-weight: bold; color: var(--text-main); }
    #profile-form input[type="text"], #profile-form input[type="email"], #profile-form textarea { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1em; box-sizing: border-box; background-color: var(--bg-main); color: var(--text-main); }
    #profile-form input:focus, #profile-form textarea:focus { border-color: var(--ko-primary); box-shadow: 0 0 0 3px rgba(var(--ko-primary-rgb), 0.15); outline: none; }
    #profile-form input[type="file"] { display: block; margin-top: 5px; }
    .cta-button, .auth-button { flex: 1; padding: 12px 20px; font-size: 1.1em; font-weight: bold; border-radius: 8px; cursor: pointer; border: none; transition: background-color 0.2s; }
    .cta-button { background-color: var(--ko-primary); color: white; }
    .auth-button { background-color: #6c757d; color: white; }
    .cta-button:hover { background-color: #0056b3; }
    .auth-button:hover { background-color: #5a6268; }

    /* Bouncing Loader Animation */
    .bouncing-dots { text-align: center; padding: 20px; font-size: 1.2em; color: var(--ko-primary); }
    .bouncing-dots span { display: inline-block; animation: bounce 1.4s infinite ease-in-out both; margin: 0 2px; background-color: var(--ko-primary); width: 10px; height: 10px; border-radius: 50%; }
    .bouncing-dots span:nth-child(1) { animation-delay: -0.32s; }
    .bouncing-dots span:nth-child(2) { animation-delay: -0.16s; }
    .bouncing-dots span:nth-child(3) { animation-delay: 0s; }
    @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    .privacy-note { font-size: 0.85em; color: var(--text-secondary); margin-top: 15px; }

    /* --- FOOTER STYLES (THEMED & CONSISTENT) --- */
    footer { background-color: #0f172a; color: #e2e8f0; padding: 40px 15px 20px; text-align: center; margin-top: 30px; }
    .footer-logo { font-size: 1.8em; font-weight: bold; margin-bottom: 10px; }
    .footer-logo span { color: var(--ko-accent); }
    .footer-links { margin: 25px 0; }
    .footer-links a { color: #94a3b8; margin: 0 10px; text-decoration: none; }
    .footer-copyright { font-size: 0.9em; color: #64748b; }
</style>
</head>
<body>
    <script src="/theme.js"></script>

    <header class="sticky-header">
      <div class="header-content">
        <a href="/" class="site-title">Kabale <span>Online</span></a>
        <nav class="desktop-nav">
            <a href="/shop/" class="nav-link">Shop</a>
            <a href="/rentals/" class="nav-link">Hostels</a>
            <a href="https://gigs.kabaleonline.com" class="nav-link service-link">Services</a>
            <a href="/events/" class="nav-link">Events</a>
            <a href="/lost-and-found/" class="nav-link">Lost & Found</a>
        </nav>
        <div class="header-icons">
          <a href="/cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
          <a href="/inbox.html"><i class="fa-regular fa-bell"></i></a>
          <a href="/dashboard/"><i class="fa-regular fa-user"></i></a>
          <button class="hamburger-menu">&#9776;</button>
        </div>
      </div>
    </header>

    <div class="mobile-nav-overlay"></div>
    <nav class="mobile-nav">
        <div class="mobile-nav-header">Kabale Online</div>
        <a href="/" class="nav-link"><i class="fa-solid fa-store"></i> All Items</a>
        <a href="/?type=service" class="nav-link service-link"><i class="fa-solid fa-screwdriver-wrench"></i> Services</a>
        <a href="/rentals/" class="nav-link"><i class="fa-solid fa-building"></i> Hostels & Rentals</a>
        <a href="/requests/view.html" class="nav-link"><i class="fa-solid fa-clipboard-list"></i> User Requests</a>
        <a href="/lost-and-found/" class="nav-link"><i class="fa-solid fa-magnifying-glass"></i> Lost & Found</a>
        <a href="/blog/" class="nav-link"><i class="fa-solid fa-book"></i> Tips</a>
    </nav>
    
    <div class="container page-content">
      <a href="/dashboard/" class="home-link">&larr; Back to Dashboard</a>
      <h1>Your Profile</h1>

      <div id="profile-loader" class="bouncing-dots">
          <span></span><span></span><span></span>
      </div>

      <div id="profile-content" class="hidden">
        <p id="profile-update-message" class="success-message"></p>

        <div class="profile-card">
          <div id="profile-display-view">
            <div class="profile-header">
              <img id="display-photo" src="https://placehold.co/120x120/e0e0e0/777?text=U" alt="Profile photo">
            </div>
            <div class="profile-info">
              <div class="profile-info-item"><span class="label">Full Name</span><span id="display-name" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Email</span><span id="display-email" class="value"></span></div>
              <div class="profile-info-item"><span class="label">WhatsApp</span><span id="display-whatsapp" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Phone</span><span id="display-phone" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Location</span><span id="display-location" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Bio</span><span id="display-bio" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Profession</span><span id="display-profession" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Facebook</span><span id="display-facebook" class="value"></span></div>
              <div class="profile-info-item"><span class="label">Instagram</span><span id="display-instagram" class="value"></span></div>
              <div class="profile-info-item"><span class="label">LinkedIn</span><span id="display-linkedin" class="value"></span></div>
            </div>
            <div class="profile-actions">
              <button id="edit-profile-btn" class="cta-button glowing-btn">Edit Profile</button>
            </div>
          </div>

          <form id="profile-form" class="hidden">
            <div class="form-group">
              <label for="profile-photo">Change Profile Photo</label>
              <input type="file" id="profile-photo" accept="image/*">
            </div>
            <div class="form-group"><label for="profile-name">Full Name (Required)</label><input type="text" id="profile-name" required></div>
            <div class="form-group"><label for="profile-email">Email (Required)</label><input type="text" id="profile-email" disabled></div>
            <div class="form-group"><label for="profile-whatsapp">WhatsApp (Required)</label><input type="text" id="profile-whatsapp" required></div>
            <div class="form-group"><label for="profile-phone">Phone (Optional)</label><input type="text" id="profile-phone"></div>
            <div class="form-group"><label for="profile-location">Location (Required)</label><input type="text" id="profile-location" required></div>
            <div class="form-group"><label for="profile-bio">Short Bio (Optional)</label><textarea id="profile-bio" rows="3"></textarea></div>
            <div class="form-group"><label for="profile-profession">Profession (Optional)</label><input type="text" id="profile-profession"></div>
            <div class="form-group"><label for="profile-facebook">Facebook (Optional)</label><input type="text" id="profile-facebook"></div>
            <div class="form-group"><label for="profile-instagram">Instagram (Optional)</label><input type="text" id="profile-instagram"></div>
            <div class="form-group"><label for="profile-linkedin">LinkedIn (Optional)</label><input type="text" id="profile-linkedin"></div>
            <div class="privacy-note">
              All required information will be used to contact you only when necessary or in emergencies. If we can't reach you via the required information, optional information (if provided) will be used. <br>
              <strong>Note:</strong> Privacy is our number one priority; we will never reveal personal data without your permission. Thank you.
            </div>
            <div class="form-actions">
              <button type="submit" id="update-profile-btn" class="cta-button">Save Changes</button>
              <button type="button" id="cancel-edit-btn" class="auth-button">Cancel</button>
            </div>
          </form>
        </div>

        <hr style="margin: 30px 0;">

        <div class="profile-card">
          <h2>Account Security</h2>
          <button id="reset-password-btn" class="auth-button">Change Password</button>
          <p class="instruction-text" style="font-size: 0.9em; margin-top: 5px;">We'll send a password reset link to your email address.</p>
        </div>
      </div>
    </div>
    
    <footer>
      <div class="container">
          <div class="footer-logo">Kabale <span>Online</span></div>
          <div class="footer-links">
              <a href="/about.html">About</a>
              <a href="/blog/">Blog</a>
              <a href="/terms.html">Terms</a>
              <a href="/contact.html">Contact</a>
          </div>
          <p class="footer-copyright">&copy; 2025 Kabale Online. All Rights Reserved.</p>
      </div>
    </footer>

    <div id="service-notice" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
        background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1201;">
      <div style="background:var(--bg-card); padding:30px 40px; border-radius:12px; text-align:center; max-width:400px; 
        box-shadow:0 5px 20px rgba(0,0,0,0.3); font-family:Arial,sans-serif;">
        <h3 style="margin-bottom:15px; color:var(--text-main);">Notice</h3>
        <p style="margin-bottom:20px; color:var(--text-secondary);">You are being redirected to <strong>Gigs.kabaleonline.com</strong> for Services.</p>
        <button id="continue-btn" style="padding:10px 20px; background:var(--ko-primary); border:none; border-radius:8px; 
          color:#fff; font-weight:bold; cursor:pointer;">Continue</button>
      </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Logic for the mobile nav toggle and service modal
      const hamburger = document.querySelector('.hamburger-menu');
      const mobileNav = document.querySelector('.mobile-nav');
      const overlay = document.querySelector('.mobile-nav-overlay');
      if (hamburger && mobileNav && overlay) {
          hamburger.addEventListener('click', () => {
              mobileNav.classList.toggle('active');
              overlay.classList.toggle('active');
          });
          overlay.addEventListener('click', () => {
              mobileNav.classList.remove('active');
              overlay.classList.remove('active');
          });
      }
      
      const serviceLinks = document.querySelectorAll('a.service-link');
      const modal = document.getElementById('service-notice');
      const continueBtn = document.getElementById('continue-btn');
      if(modal && continueBtn && serviceLinks.length > 0) {
        serviceLinks.forEach(link => {
            link.addEventListener('click', function(e) {
              e.preventDefault();
              modal.style.display = 'flex';
            });
        });
        continueBtn.addEventListener('click', function() {
            window.location.href = 'https://gigs.kabaleonline.com';
        });
        modal.addEventListener('click', function(e) {
            if(e.target === modal) modal.style.display = 'none';
        });
      }
    });
    </script>
    
    <script type="module" src="../js/shared.js"></script>
    <script type="module" src="script.js"></script>
    <script type="module" src="../js/ui.js"></script>
</body>
</html>