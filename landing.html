<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kabale Online | The #1 Student Marketplace in Kabale</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* --- NEW DARK THEME DESIGN --- */
        :root {
            --primary-gradient: linear-gradient(90deg, #4e54c8, #8f94fb);
            --accent-gradient: linear-gradient(90deg, #ffc107, #f7b733);
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-main: #e2e8f0;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --border-radius: 12px;
            
            /* Your original colors for reference */
            --ko-primary: #007bff;
            --ko-accent: #ffc107;
        }

        /* --- LIGHT MODE THEME --- */
        body.light-mode {
            --bg-dark: #f1f5f9;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-dark);
            color: var(--text-main);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }

        /* --- STICKY HEADER (ADAPTED) --- */
        .sticky-header {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .header-top-bar { display: flex; align-items: center; padding: 0 15px; height: 65px; max-width: 1200px; margin: 0 auto;}
        .hamburger-menu { font-size: 22px; background: none; border: none; cursor: pointer; color: var(--text-main); padding-right: 15px; }
        .site-title { text-decoration: none; color: var(--text-main); font-size: 1.4em; font-weight: bold; }
        .site-title span { color: var(--ko-accent); }
        .header-spacer { flex-grow: 1; }
        .header-icons { display: flex; align-items: center; gap: 20px; }
        .header-icons a { color: var(--text-main); font-size: 22px; text-decoration: none; }
        
        /* --- THEME TOGGLE SWITCH --- */
        .theme-switch-wrapper { display: flex; align-items: center; cursor: pointer; }
        .theme-switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 22px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--ko-primary); }
        input:checked + .slider:before { transform: translateX(18px); }

        /* --- HERO SLIDER --- */
        .hero-slider { position: relative; height: 50vh; max-height: 400px; overflow: hidden; margin-top: 65px; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease-in-out; background-size: cover; background-position: center; }
        .slide.active { opacity: 1; }
        .slide-content { position: relative; z-index: 2; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: rgba(0,0,0,0.5); }
        .slide-content h1 { font-size: 2.5em; color: white; margin: 0; }
        .slide-content p { color: #eee; font-size: 1.2em; margin: 10px 0 20px; }
        .slide-content .cta-button { background: var(--primary-gradient); color: white; padding: 12px 30px; border-radius: 50px; text-decoration: none; font-weight: bold; }

        /* --- STATS SECTION --- */
        .stats-section { padding: 60px 15px; text-align: center; }
        .stats-section h2 { font-size: 2em; margin-bottom: 40px; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .stat-card { background-color: var(--bg-card); padding: 25px; border-radius: var(--border-radius); border: 1px solid var(--border-color); }
        .stat-card .icon { font-size: 2em; margin-bottom: 10px; color: var(--ko-primary); }
        .stat-card .stat-number { font-size: 2.2em; font-weight: bold; }
        .stat-card .stat-label { color: var(--text-secondary); }

        /* --- TOP SECTIONS --- */
        .top-sections { padding: 60px 15px; }
        .top-sections h2 { text-align: center; font-size: 2em; margin-bottom: 40px; }
        .sections-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .section-card { background: var(--bg-card); padding: 25px; border-radius: var(--border-radius); border: 1px solid var(--border-color); text-decoration: none; color: var(--text-main); display: block; }
        .section-card i { font-size: 1.5em; color: var(--ko-primary); margin-bottom: 15px; }
        .section-card h3 { margin: 0 0 10px; }
        .section-card p { color: var(--text-secondary); margin: 0; }

        /* --- TRENDING PRODUCTS CAROUSEL --- */
        .trending-section { padding: 60px 0; }
        .trending-section h2 { text-align: center; font-size: 2em; margin-bottom: 40px; padding: 0 15px; }
        .product-carousel-wrapper { overflow-x: auto; padding: 0 15px 20px; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        .product-carousel { display: flex; gap: 15px; }
        .product-card { flex: 0 0 200px; background: var(--bg-card); border-radius: var(--border-radius); overflow: hidden; text-decoration: none; color: var(--text-main); scroll-snap-align: start; }
        .product-card img { width: 100%; height: 200px; object-fit: cover; }
        .product-card-content { padding: 15px; }
        .product-card h3 { margin: 0 0 5px; font-size: 1em; }
        .product-card .price { font-weight: bold; color: var(--ko-primary); }

        /* --- CTA SECTION --- */
        .cta-section { padding: 60px 15px; background: var(--bg-card); text-align: center; margin: 40px 0; }
        .cta-section h2 { font-size: 2em; margin-bottom: 20px; }
        .cta-buttons { display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .cta-btn { padding: 12px 30px; border-radius: 50px; text-decoration: none; font-weight: bold; min-width: 200px; }
        .cta-buy { background: var(--primary-gradient); color: white; }
        .cta-sell { background: var(--accent-gradient); color: var(--bg-dark); }

        /* --- TESTIMONIAL SECTION (ADAPTED) --- */
        .testimonial-section { padding: 60px 15px; }
        .testimonial-section h2 { text-align: center; font-size: 2em; margin-bottom: 40px; }
        .testimonial-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .testimonial-card { background-color: var(--bg-card); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--ko-primary); }
        .testimonial-text { font-style: italic; color: var(--text-secondary); margin: 0 0 15px; }
        .testimonial-author { font-weight: bold; text-align: right; }
        
        /* --- FOOTER (ADAPTED) --- */
        footer { background-color: #0f172a; color: #e2e8f0; padding: 60px 15px 20px; text-align: center; }
        .footer-logo { font-size: 1.8em; font-weight: bold; margin-bottom: 10px; }
        .footer-logo span { color: var(--ko-accent); }
        .footer-links { margin: 25px 0; }
        .footer-links a { color: #94a3b8; margin: 0 10px; text-decoration: none; }
        .footer-copyright { font-size: 0.9em; color: #64748b; }

        /* --- RESPONSIVE ADJUSTMENTS --- */
        @media (min-width: 768px) {
            .stats-grid { grid-template-columns: repeat(4, 1fr); }
            .sections-grid { grid-template-columns: repeat(2, 1fr); }
            .testimonial-grid { grid-template-columns: repeat(2, 1fr); }
            .cta-buttons { flex-direction: row; justify-content: center; }
        }
    </style>
</head>
<body>

    <header class="sticky-header">
        <div class="header-top-bar">
            <button class="hamburger-menu" aria-label="Open menu">&#9776;</button>
            <a href="/" class="site-title">Kabale <span>Online</span></a>
            <div class="header-spacer"></div>
            <div class="header-icons">
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="theme-toggle">
                        <input type="checkbox" id="theme-toggle" />
                        <span class="slider"></span>
                    </label>
                </div>
                <a href="/cart.html" aria-label="Cart"><i class="fas fa-shopping-cart"></i></a>
                <a href="/dashboard/" aria-label="Dashboard"><i class="fas fa-user"></i></a>
            </div>
        </div>
    </header>

    <nav class="mobile-nav">
        </nav>
    <div class="mobile-nav-overlay"></div>

    <main>
        <section class="hero-slider">
            <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=2070&auto=format&fit=crop');">
                <div class="slide-content">
                    <h1>Buy & Sell Textbooks</h1>
                    <p>Find course materials from fellow students.</p>
                    <a href="#" class="cta-button">Browse Books</a>
                </div>
            </div>
            <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1593642702821-c8da6771f0c6?q=80&w=1974&auto=format&fit=crop');">
                <div class="slide-content">
                    <h1>Latest Gadgets</h1>
                    <p>Upgrade your tech for less.</p>
                    <a href="#" class="cta-button">Shop Electronics</a>
                </div>
            </div>
        </section>

        <section class="stats-section">
            <div class="container">
                <h2>Trusted by the <span style="background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Kabale</span> Community</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="icon"><i class="fas fa-users"></i></div>
                        <div class="stat-number" data-target="500">0</div>
                        <div class="stat-label">Registered Students</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon"><i class="fas fa-box"></i></div>
                        <div class="stat-number" data-target="1200">0</div>
                        <div class="stat-label">Items Listed</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon"><i class="fas fa-star"></i></div>
                        <div class="stat-number">4.8</div>
                        <div class="stat-label">Average Rating</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon"><i class="fas fa-building-columns"></i></div>
                        <div class="stat-number" data-target="50">0</div>
                        <div class="stat-label">Hostels Listed</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="top-sections">
            <div class="container">
                <h2>What We Offer</h2>
                <div class="sections-grid">
                    <a href="/" class="section-card">
                        <i class="fas fa-store"></i>
                        <h3>Buy Items</h3>
                        <p>Discover amazing deals on textbooks, electronics, furniture, and more from students in Kabale.</p>
                    </a>
                    <a href="/upload/" class="section-card">
                        <i class="fas fa-cash-register"></i>
                        <h3>Sell Your Stuff</h3>
                        <p>Turn your unused items into cash. List your products and connect with buyers in your campus community.</p>
                    </a>
                    <a href="/rentals/" class="section-card">
                        <i class="fas fa-house-user"></i>
                        <h3>Find Hostels</h3>
                        <p>Browse listings for student hostels and rentals near campus, with details and contact information.</p>
                    </a>
                    <a href="/?type=service" class="section-card">
                        <i class="fas fa-concierge-bell"></i>
                        <h3>Discover Services</h3>
                        <p>Find local services offered by students and residents, from tutoring to repairs and more.</p>
                    </a>
                </div>
            </div>
        </section>

        <section class="trending-section">
            <h2>Trending Products</h2>
            <div class="product-carousel-wrapper">
                <div class="product-carousel" id="trending-products-grid">
                    <p>Loading products...</p>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <div class="container">
                <h2>Ready to Start?</h2>
                <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto 30px;">Join our community today and discover a smarter way to buy and sell on campus.</p>
                <div class="cta-buttons">
                    <a href="/" class="cta-btn cta-buy">Start Buying</a>
                    <a href="/upload/" class="cta-btn cta-sell">Start Selling</a>
                </div>
            </div>
        </section>

        <section class="testimonial-section">
            <h2 class="section-title">Community Voices</h2>
            <div id="testimonial-grid" class="testimonial-grid">
                </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-logo">Kabale <span>Online</span></div>
            <div class="footer-links">
                <a href="/about.html">About</a>
                <a href="/blog/">Blog</a>
                <a href="/terms.html">Terms</a>
                <a href="/contact.html">Contact</a>
            </div>
            <p class="footer-copyright">&copy; 2025 Kabale Online. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- THEME TOGGLE LOGIC ---
        const themeToggle = document.getElementById('theme-toggle');
        const currentTheme = localStorage.getItem('theme');

        if (currentTheme) {
            document.body.classList.add(currentTheme);
            if (currentTheme === 'light-mode') {
                themeToggle.checked = true;
            }
        }

        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                document.body.classList.add('light-mode');
                localStorage.setItem('theme', 'light-mode');
            } else {
                document.body.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark-mode');
            }
        });

        // --- HERO SLIDER LOGIC ---
        const slides = document.querySelectorAll('.hero-slider .slide');
        let currentSlide = 0;
        setInterval(() => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }, 5000); // Change slide every 5 seconds

        // --- ANIMATED STATS COUNTER ---
        const counters = document.querySelectorAll('.stat-number');
        const speed = 200; // The lower the number, the faster the count

        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const counter = entry.target;
                    const animate = () => {
                        const target = +counter.getAttribute('data-target');
                        const count = +counter.innerText;
                        const inc = target / speed;

                        if (count < target) {
                            counter.innerText = Math.ceil(count + inc);
                            setTimeout(animate, 1);
                        } else {
                            counter.innerText = target.toLocaleString();
                        }
                    };
                    animate();
                    observer.unobserve(counter); // Stop observing once animated
                }
            });
        }, { threshold: 0.5 });

        counters.forEach(counter => {
            if (counter.getAttribute('data-target')) {
                observer.observe(counter);
            }
        });

        // NOTE: Your existing main.js would still be needed to fetch
        // the actual data for the trending products and testimonials.
        // For example:
        // fetchTrendingProducts(); -> would populate #trending-products-grid
        // fetchTestimonials(); -> would populate #testimonial-grid
    });
    </script>
    
    <script type="module" src="ui.js"></script>
    <script type="module" src="main.js"></script>
    <script type="module" src="shared.js"></script>
</body>
</html>